# RocketMQ源码笔记

## 发送篇

### 核心流程

1. 校验主题
2. 根据主题曲远程查找相关信息
   1. broker
   2. 队列
3. 确定重试次数
4. 确定发送的队列下标
   1. 根据当前线程的随机数自增后取模得到一个下标
   2. 验证下标队列是否有效
5. 内核级别发送流程
   1. 根据topic查看broker存在的地址
   2. 消息是否需要压缩
   3. 开始发送消息
      1. 发送前置拦截器 : RPCHook
      2. 通过Netty发送到broker服务端
      3. 处理后置处理器







