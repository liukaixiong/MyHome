# 灰度发布

## 服务

### 多版本

- 给定一个接口的特定版本号。
- 当该接口需要升级时需要升级该接口的版本号。
- 当服务需要上线时，只上线一台服务。
- 老的服务根据老的版本号调用老的接口，新的服务用最新的版本号，只调用新的接口。新老不冲突。

### 权重

根据权重将新的接口权重调低，上线，确保不会大面积瘫痪。但是如果出现接口升级的话并且不兼容老的话会出现问题，比如老接口调用新接口参数没传调用会异常.

但是也可以将新的服务下线，先进行模拟测试。

### 区域划分

比如上海、北京服务器。先发上海的，如果出现问题也只会影响上海这一部分的情况。

### 用户编号(业务规则)

根据用户编号将部分用户路由到指定服务，升级时也只会影响该服务器的用户，而不是全局用户。

## 